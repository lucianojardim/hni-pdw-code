@{
    ViewBag.Title = "Index";
}
@using ProductDataWarehouse.Controllers
<script type="text/javascript">

    function DoAjaxCall() {
        $.ajax({
            dataType: 'json',
            crossDomain: true,
            type: 'GET',
            url: 'http://matt3400:8780/PDW/GetSeriesList?callback=?',
            data: null,
            success: function (data, textStatus, jqXHR) {
                $("#ajaxResults").text(JSON.stringify(data));
            },
            error: function (jqXHR, textStatus, errorThrown) {
                alert('Error getting data:' + errorThrown + ' [' + textStatus + ']');
            }
        });
    }

</script>

    <div style="border:1px solid gray; padding:10px; margin:20px 0px;">
    <h2>Import PDW File</h2>

    @using( Html.BeginForm( "Index", "Import", FormMethod.Post, new { id = "theForm", name = "TheForm", enctype = "multipart/form-data" } ) )
    {
        @Html.Label( "File Name: " )<input type="file" name="csvFile" data-val-required="The File Name is a required field." data-val="true" /><br />
@Html.ValidationSummary()
        <input type="submit" value="Import" />
    }
    </div>
    <div style="border:1px solid gray; padding:10px; margin:20px 0px;">
    <h2>Import Image File</h2>

    @using( Html.BeginForm( "UploadFile", "Import", FormMethod.Post, new { id = "theForm", name = "TheForm", enctype = "multipart/form-data" } ) )
    {
        @Html.Label( "Image Name: " )<input type="text" name="imageName" data-val-required="The Image Name is a required field." data-val="true" /><br />
        @Html.Label( "Image File Name: " )<input type="file" name="imageFile" data-val-required="The Image File Name is a required field." data-val="true" /><br />
        @Html.Label( "Caption: " )<textarea name="caption" rows="5" cols="30"></textarea><br />
        @Html.Label( "People in Picture? " )@Html.CheckBox( "hasPeople" )<br />
        @Html.Label( "Image Type: " )@Html.DropDownList( "imageType", ImportController.GetImageTypeList() )<br />
        <div style="border:1px solid gray; padding:10px; margin:10px 0px;">
            @foreach( var imgRatio in ImportController.GetImageRatioList() )
            {
                @Html.Label( imgRatio.Text )@Html.DropDownList( imgRatio.Value, ImportController.GetImageCropLocations() )<br />
            }
        </div>
@Html.ValidationSummary()
        <input type="submit" value="Import" />
    }
    </div>

<input type="button" onclick="DoAjaxCall();" value="Test Cross Domain" />
<p id="ajaxResults"></p>

